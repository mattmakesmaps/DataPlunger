{
    "type": "ConfigCollection",
    "configs": [
        {
            "name": "PeopleAndGradesConfig",
            "readers": {
                "Grades": {
                    "type": "ReaderCSV",
                    "path": "/Users/matt/Projects/dataplunger/sample_data/grades.csv",
                    "delimeter": ",",
                    "encoding": "UTF-8"
                },
                "People": {
                    "type": "ReaderCSV",
                    "path": "/Users/matt/Projects/dataplunger/sample_data/people.csv",
                    "delimeter": ",",
                    "encoding": "UTF-8"
                }
            },
            "layers": [
                {
                    "name" : "GradesLayer",
                    "processing_steps": [
                        {"ProcessorGetData": {"reader": "Grades"}},
                        {"ProcessorSortRecords": {"sort_key": "subject"}},
                        {"ProcessorCSVWriter": {"path":"/Users/matt/Projects/dataplunger/sample_output/grades_out.csv",
                            "fields": ["subject","name","grade"]}}
                    ]
                },
                {
                    "name" : "PeopleLayer",
                    "processing_steps": [
                        {"ProcessorGetData": {"reader": "People"}},
                        {"ProcessorSortRecords": {"sort_key": "name"}},
                        {"ProcessorCSVWriter": {"path":"/Users/matt/Projects/dataplunger/sample_output/people_out.csv",
                            "fields": ["name","age","gender"]}}
                    ]
                }
            ]
        },
        {
            "name": "WACensusConfig",
            "readers": {
                "WA_All": {
                    "type": "ReaderCensus",
                    "path": "/Users/matt/Projects/dataplunger/sample_data/Washington_All_Geographies_Tracts_Block_Groups_Only",
                    "delimiter": ",",
                    "encoding": "UTF-8",
                    "fields": {
                        "Total": 1,
                        "Male": 2,
                        "Female": 17
                    },
                    "sequence": 2,
                    "starting_position": 87
                }
            },
            "layers": [
                {
                    "name" : "WACensusLayer",
                    "processing_steps": [
                        {"ProcessorGetData": {"reader": "WA_All"}},
                        {"ProcessorMatchValue": {
                            "matches":{"SUMLEVEL":140},
                            "action":"Keep"
                        }},
                        {"ProcessorTruncateFields": {"fields": ["Total", "Male", "Female", "SUMLEVEL", "LOGRECNO"]}},
                        {"ProcessorScreenWriter": null},
                        {"ProcessorCSVWriter": {"path":"/Users/matt/Projects/dataplunger/sample_output/age_by_sex.csv",
                            "fields": ["Total", "Male", "Female", "SUMLEVEL", "LOGRECNO"]}},
                        {"ProcessorSortRecords": {"sort_key": "Total"}},
                        {"ProcessorCSVWriter": {"path":"/Users/matt/Projects/dataplunger/sample_output/age_by_sex_sorted.csv",
                            "fields": ["Total", "Male", "Female", "SUMLEVEL", "LOGRECNO"]}}
                    ]
                }
            ]
        }
    ]
}
