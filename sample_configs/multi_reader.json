{
    "type": "ConfigCollection",
    "configs": [
        {
            "name": "PostgresConfig",
            "readers": {
                "ZillowDB": {
                    "type": "ReaderPostgres",
                    "query": "/Users/matt/Projects/dataplunger/dataplunger/tests/test_data/test_query.sql",
                    "database": "topo_test"
                }
            },
            "layers": [
                {
                    "name" : "ZillowLayer",
                    "processing_steps": [
                        {"ProcessorGetData": {"reader": "ZillowDB"}},
                        {"ProcessorCSVWriter": {"path":"/Users/matt/Projects/dataplunger/sample_output/zillow_hoods.csv",
                            "fields": ["name","city","county","state"]}}
                    ]
                }
            ]
        },
        {
            "name": "SHPConfig",
            "readers": {
                "NaturalEarthLakes": {
                    "type": "ReaderSHP",
                    "path": "/Users/matt/Projects/dataplunger/dataplunger/tests/test_data/50m_lakes_utf8.shp"
                }
            },
            "layers": [
                {
                    "name" : "LakesLayer",
                    "processing_steps": [
                        {"ProcessorGetData": {"reader": "NaturalEarthLakes"}},
                        {"ProcessorSortRecords": {"sort_key": "scalerank"}},
                        {"ProcessorCSVWriter": {"path":"/Users/matt/Projects/dataplunger/sample_output/50m_lakes_sorted.csv",
                            "fields": ["fiona_id", "fiona_type", "admin", "featurecla", "name", "name_alt", "note", "scalerank"]}}
                    ]
                }
            ]
        },
        {
            "name": "PeopleAndGradesConfig",
            "readers": {
                "Grades": {
                    "type": "ReaderCSV",
                    "path": "/home/mkenny/Projects/DataPlunger/dataplunger/sample_data/grades.csv",
                    "delimeter": ","
                },
                "People": {
                    "type": "ReaderCSV",
                    "path": "/home/mkenny/Projects/DataPlunger/dataplunger/sample_data/people.csv",
                    "delimeter": ","
                }
            },
            "layers": [
                {
                    "name" : "PeopleAndGradesLayer",
                    "processing_steps": [
                        {"ProcessorGetData": {"reader": "People"}},
                        {"ProcessorCombineData_ValueHash": {"reader": "Grades", "keys": ["name"]}},
                        {"ProcessorSortRecords": {"sort_key": "name"}},
                        {"ProcessorCSVWriter": {"path":"/home/mkenny/Projects/DataPlunger/dataplunger/sample_output/peopleandgrades_out.csv",
                            "fields": ["name","subject","grade","gender","age"]}}
                    ]
                }
            ]
        },
        {
            "name": "EPAFRSConfig",
            "readers": {
                "NationalSingleFile": {
                    "type": "ReaderCSV",
                    "path": "/Users/matt/Projects/dataplunger/sample_data/NATIONAL_SINGLE.csv",
                    "delimeter": ",",
                    "encoding": "UTF-8"
                }
            },
            "layers": [
                {
                    "name" : "EPAFRS_SORTED",
                    "processing_steps": [
                        {"ProcessorGetData": {"reader": "NationalSingleFile"}},
                        {"ProcessorTruncateFields": {
                            "fields": ["FRS_FACILITY_DETAIL_REPORT_URL", "REGISTRY_ID", "PRIMARY_NAME", "LOCATION_ADDRESS", "SUPPLEMENTAL_LOCATION", "CITY_NAME", "COUNTY_NAME", "FIPS_CODE", "STATE_CODE", "STATE_NAME", "COUNTRY_NAME", "POSTAL_CODE", "FEDERAL_FACILITY_CODE", "FEDERAL_AGENCY_NAME", "TRIBAL_LAND_CODE", "TRIBAL_LAND_NAME", "CONGRESSIONAL_DIST_NUM", "CENSUS_BLOCK_CODE", "HUC_CODE", "EPA_REGION_CODE", "SITE_TYPE_NAME", "LOCATION_DESCRIPTION", "CREATE_DATE", "UPDATE_DATE", "US_MEXICO_BORDER_IND", "PGM_SYS_ACRNMS", "INTEREST_TYPES", "NAICS_CODES", "NAICS_CODE_DESCRIPTIONS", "SIC_CODES", "SIC_CODE_DESCRIPTIONS", "LATITUDE83", "LONGITUDE83", "CONVEYOR", "COLLECT_DESC", "ACCURACY_VALUE", "REF_POINT_DESC", "HDATUM_DESC", "SOURCE_DESC"]}},
                        {"ProcessorChangeCase": {"case": "upper"}},
                        {"ProcessorSortRecords": {"sort_key": "CITY_NAME"}},
                        {"ProcessorCSVWriter": {"path": "/Users/matt/Projects/dataplunger/sample_output/EPA_FRS_SORTED.csv",
                            "fields": ["FRS_FACILITY_DETAIL_REPORT_URL", "REGISTRY_ID", "PRIMARY_NAME", "LOCATION_ADDRESS", "SUPPLEMENTAL_LOCATION", "CITY_NAME", "COUNTY_NAME", "FIPS_CODE", "STATE_CODE", "STATE_NAME", "COUNTRY_NAME", "POSTAL_CODE", "FEDERAL_FACILITY_CODE", "FEDERAL_AGENCY_NAME", "TRIBAL_LAND_CODE", "TRIBAL_LAND_NAME", "CONGRESSIONAL_DIST_NUM", "CENSUS_BLOCK_CODE", "HUC_CODE", "EPA_REGION_CODE", "SITE_TYPE_NAME", "LOCATION_DESCRIPTION", "CREATE_DATE", "UPDATE_DATE", "US_MEXICO_BORDER_IND", "PGM_SYS_ACRNMS", "INTEREST_TYPES", "NAICS_CODES", "NAICS_CODE_DESCRIPTIONS", "SIC_CODES", "SIC_CODE_DESCRIPTIONS", "LATITUDE83", "LONGITUDE83", "CONVEYOR", "COLLECT_DESC", "ACCURACY_VALUE", "REF_POINT_DESC", "HDATUM_DESC", "SOURCE_DESC"]}}
                    ]
                }
            ]
        },
        {
            "name": "FreebaseConfig",
            "readers": {
                "FBDel_20": {
                    "type": "ReaderCSV",
                    "path": "/Users/matt/Projects/dataplunger/sample_data/freebase_20.csv",
                    "delimeter": ",",
                    "encoding": "UTF-8"
                },
                "FBDel_10": {
                    "type": "ReaderCSV",
                    "path": "/Users/matt/Projects/dataplunger/sample_data/freebase_10.csv",
                    "delimeter": ",",
                    "encoding": "UTF-8"
                },
                "FBDel_10_Trunc": {
                    "type": "ReaderCSV",
                    "path": "/Users/matt/Projects/dataplunger/sample_data/freebase_10_t.csv",
                    "delimeter": ",",
                    "encoding": "UTF-8"
                },
                "FBDel_5": {
                    "type": "ReaderCSV",
                    "path": "/Users/matt/Projects/dataplunger/sample_data/freebase_5.csv",
                    "delimeter": ",",
                    "encoding": "UTF-8"
                },
                "FBDel_5_Trunc": {
                    "type": "ReaderCSV",
                    "path": "/Users/matt/Projects/dataplunger/sample_data/freebase_5_t.csv",
                    "delimeter": ",",
                    "encoding": "UTF-8"
                },
                "FBDel_5Rec": {
                    "type": "ReaderCSV",
                    "path": "/Users/matt/Projects/dataplunger/sample_data/freebase_5rec.csv",
                    "delimeter": ",",
                    "encoding": "UTF-8"
                }
            },
            "layers": [
                {
                    "name" : "Freebase_Sorted",
                    "processing_steps": [
                        {"ProcessorGetData": {"reader": "FBDel_5"}},
                        {"ProcessorCombineData_ValueHash": {"reader": "FBDel_5_Trunc", "keys": ["creation_timestamp", "creator"]}},
                        {"ProcessorCSVWriter": {"path": "/Users/matt/Projects/dataplunger/sample_output/freebase_5_combined.csv",
                            "fields": ["creation_timestamp","creator","deletion_timestamp","deletor","subject","predicate",
                            "deletion_timestamp2","deletor2","subject2","predicate2"]}}
                    ]
                }
            ]
        },
        {
            "name": "WACensusConfigSolos",
            "readers": {
                "B01002": {
                    "type": "ReaderCensus",
                    "path": "/home/mkenny/Projects/DataPlunger/sample_data/Washington_All_Geographies_Tracts_Block_Groups_Only",
                    "delimiter": ",",
                    "fields": {
                        "mage_c": {"line_number": 1, "type": "float"},
                        "mage_mal_c": {"line_number": 2, "type": "float"},
                        "mage_fem_c": {"line_number": 3, "type": "float"}
                    },
                    "sequence": 3,
                    "starting_position": 100
                },
                "B02001": {
                    "type": "ReaderCensus",
                    "path": "/home/mkenny/Projects/DataPlunger/sample_data/Washington_All_Geographies_Tracts_Block_Groups_Only",
                    "delimiter": ",",
                    "fields": {
                        "indian_c": {"line_number": 4, "type": "int"},
                        "asian_c": {"line_number": 5, "type": "int"},
                        "black_c": {"line_number": 3, "type": "int"},
                        "pi_c": {"line_number": 6, "type": "int"},
                        "white_c": {"line_number": 2, "type": "int"}
                    },
                    "sequence": 4,
                    "starting_position": 7
                }
            },
            "layers": [
                {
                    "name" : "WAAge",
                    "processing_steps": [
                        {"ProcessorGetData": {"reader": "B01002"}},
                        {"ProcessorMatchValue": {
                            "matches":{"SUMLEVEL":140},
                            "action":"Keep"
                        }},
                        {"ProcessorCSVWriter": {"path": "/home/mkenny/Projects/DataPlunger/sample_output/WAAge.csv",
                            "fields": ["LOGRECNO", "SUMLEVEL", "mage_c", "mage_mal_c", "mage_fem_c"]
                        }}

                    ]
                },
                {
                    "name" : "WARace",
                    "processing_steps": [
                        {"ProcessorGetData": {"reader": "B02001"}},
                        {"ProcessorMatchValue": {
                            "matches":{"SUMLEVEL":140},
                            "action":"Keep"
                        }},
                        {"ProcessorCSVWriter": {"path": "/home/mkenny/Projects/DataPlunger/sample_output/WARace.csv",
                            "fields": ["LOGRECNO", "SUMLEVEL", "indian_c", "asian_c", "black_c", "pi_c", "white_c"]
                        }}

                    ]
                }
            ]
        },
        {
            "name": "WACensusConfigCombined",
            "readers": {
                "B01002": {
                    "type": "ReaderCensus",
                    "path": "/home/mkenny/Projects/DataPlunger/sample_data/Washington_All_Geographies_Tracts_Block_Groups_Only",
                    "delimiter": ",",
                    "fields": {
                        "mage_c": {"line_number": 1, "type": "float"},
                        "mage_mal_c": {"line_number": 2, "type": "float"},
                        "mage_fem_c": {"line_number": 3, "type": "float"}
                    },
                    "sequence": 3,
                    "starting_position": 100
                },
                "B02001": {
                    "type": "ReaderCensus",
                    "path": "/home/mkenny/Projects/DataPlunger/sample_data/Washington_All_Geographies_Tracts_Block_Groups_Only",
                    "delimiter": ",",
                    "fields": {
                        "indian_c": {"line_number": 4, "type": "int"},
                        "asian_c": {"line_number": 5, "type": "int"},
                        "black_c": {"line_number": 3, "type": "int"},
                        "pi_c": {"line_number": 6, "type": "int"},
                        "white_c": {"line_number": 2, "type": "int"}
                    },
                    "sequence": 4,
                    "starting_position": 7
                }
            },
            "layers": [
                {
                    "name" : "WAAgeAndRace",
                    "processing_steps": [
                        {"ProcessorGetData": {"reader": "B01002"}},
                        {"ProcessorMatchValue": {
                            "matches":{"SUMLEVEL":140},
                            "action":"Keep"
                        }},
                        {"ProcessorCombineData_ValueHash": {"reader": "B02001", "keys": ["LOGRECNO"]}},
                        {"ProcessorMatchValue": {
                            "matches":{"SUMLEVEL":140},
                            "action":"Keep"
                        }},
                        {"ProcessorCSVWriter": {"path": "/home/mkenny/Projects/DataPlunger/sample_output/WAAgeAndRace.csv",
                            "fields": ["LOGRECNO", "SUMLEVEL", "mage_c", "mage_mal_c",
                                "mage_fem_c", "indian_c", "asian_c", "black_c", "pi_c", "white_c"]
                        }}
                    ]
                }
            ]
        }
    ]
}
